---
- name:  install checkmk
  hosts: localhost
  vars:
    checkmk_url_deb : https://download.checkmk.com/checkmk/1.6.0p20/check-mk-raw-1.6.0p20_0.focal_amd64.deb
  tasks:
  
    - name: Import a key from a checkmk APT repository
      ansible.builtin.apt_key:
      url: https://download.checkmk.com/checkmk/Check_MK-pubkey.gpg
      state: present
      
    - name: apt install git if not present
      apt:  
       name: ['openssh-server','dpkg-sig','gdebi-core']
       state: present

    - name: install check-mk deb file
      apt: 
        deb: "{{ checkmk_url_deb }}"
        state: present
