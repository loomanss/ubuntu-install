# cat >> base.yml << #eof
---
- name: base ansible playbook
  hosts: localhost
  tasks:
  
    - name: Check docker is installed
      command: dpkg-query -l docker
      register: docker_check

    - name: include docker install if not installed
      include: tasks/docker_install.yml
      when: docker_check.stdout.find('no packages found') != -1

    - name: Show facts available on the system
      ansible.builtin.debug:
        var: ansible_facts
      
    - name: include docker install if not installed
      include: tasks/docker_pull.yml
      with_items:
        - "mysql"
        - "portainer/portainer"
        - "nodered/node-red"
        - "grafana/grafana"
        - "influxdb"
